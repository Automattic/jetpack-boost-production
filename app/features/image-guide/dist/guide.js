!function(){"use strict";class e{node;getURLCallback;constructor(e,t){this.node=e,this.getURLCallback=t}getURL(){return this.getURLCallback(this.node)}getSizeOnPage(){const{width:e,height:t}=this.node.getBoundingClientRect();return{width:Math.round(e),height:Math.round(t)}}async getFileSize(e){const[t,{width:n,height:o}]=await Promise.all([this.fetchFileWeight(e),this.fetchFileDimensions(e)]);return{width:n,height:o,weight:t}}getPotentialSavings(e,t){const n=this.getOversizedRatio(e,t);return n<=1?null:Math.round(e.weight-e.weight/n)}getExpectedSize(e){const t=window.devicePixelRatio||1;return{width:Math.round(e.width*t),height:Math.round(e.height*t)}}getOversizedRatio(e,t){const{width:n,height:o}=this.getExpectedSize(t);return e.width*e.height/(n*o)}async fetchFileWeight(e){const t=await fetch(e,{method:"HEAD",mode:"no-cors"});if(!t.url)return console.log(`Can't get image size for ${e} likely due to a CORS error.`),-1;const n=t.headers.get("content-length");return n?parseInt(n,10)/1024:-1}async fetchFileDimensions(e){const t=new Image;return t.src=e,new Promise((e=>{t.onload=()=>{e({width:Math.round(t.width),height:Math.round(t.height)})},t.onerror=()=>{e({width:-1,height:-1})}}))}}function t(e){return i(e.currentSrc)?e.currentSrc:i(e.src)?e.src:null}function n(e){const t=getComputedStyle(e).backgroundImage.match(/url\(.?(.*?).?\)/i);if(t&&t[1]&&i(t[1]))return t[1]}function o(o){return function(e){return e.filter((e=>e instanceof HTMLImageElement||e instanceof HTMLElement&&"none"!==getComputedStyle(e).backgroundImage))}(o).map((o=>o instanceof HTMLImageElement?new e(o,t):o instanceof HTMLElement&&n(o)?new e(o,n):null)).filter((e=>null!==e))}function i(e){if(e.startsWith("/")){return!e.split("?")[0].endsWith(".svg")}try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}function s(){}const r=e=>e;function c(e,t,n,o,i){e.__svelte_meta={loc:{file:t,line:n,column:o,char:i}}}function a(e){return e()}function l(){return Object.create(null)}function u(e){e.forEach(a)}function d(e){return"function"==typeof e}function f(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let p;function h(e,t){return p||(p=document.createElement("a")),p.href=t,e===p.href}function g(e,t){if(null!=e&&"function"!=typeof e.subscribe)throw new Error(`'${t}' is not a store with a 'subscribe' method`)}function m(e,...t){if(null==e)return s;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function $(e,t,n){e.$$.on_destroy.push(m(t,n))}const w="undefined"!=typeof window;let v=w?()=>window.performance.now():()=>Date.now(),b=w?e=>requestAnimationFrame(e):s;const y=new Set;function k(e){y.forEach((t=>{t.c(e)||(y.delete(t),t.f())})),0!==y.size&&b(k)}function x(e){let t;return 0===y.size&&b(k),{promise:new Promise((n=>{y.add(t={c:e,f:n})})),abort(){y.delete(t)}}}function S(e,t){e.appendChild(t)}function z(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=_("style");return function(e,t){S(e.head||e,t),t.sheet}(z(e),t),t.sheet}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function _(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function O(e){return document.createTextNode(e)}function P(){return O(" ")}function B(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function j(e,t,n){e.classList[n?"add":"remove"](t)}function C(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,o,t),i}const M=new Map;let N,A=0;function D(e,t,n,o,i,s,r,c=0){const a=16.666/o;let l="{\n";for(let e=0;e<=1;e+=a){const o=t+(n-t)*s(e);l+=100*e+`%{${r(o,1-o)}}\n`}const u=l+`100% {${r(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${c}`,f=z(e),{stylesheet:p,rules:h}=M.get(f)||function(e,t){const n={stylesheet:E(t),rules:{}};return M.set(e,n),n}(f,e);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${o}ms linear ${i}ms 1 both`,A+=1,d}function T(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-o.length;i&&(e.style.animation=o.join(", "),A-=i,A||b((()=>{A||(M.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&R(t)})),M.clear())})))}function I(e){N=e}function U(e){(function(){if(!N)throw new Error("Function called outside component initialization");return N})().$$.on_mount.push(e)}function q(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const F=[],H=[],J=[],W=[],G=Promise.resolve();let Z=!1;function K(e){J.push(e)}const V=new Set;let Y,Q=0;function X(){const e=N;do{for(;Q<F.length;){const e=F[Q];Q++,I(e),ee(e.$$)}for(I(null),F.length=0,Q=0;H.length;)H.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];V.has(t)||(V.add(t),t())}J.length=0}while(F.length);for(;W.length;)W.pop()();Z=!1,V.clear(),I(e)}function ee(e){if(null!==e.fragment){e.update(),u(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}function te(){return Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y}function ne(e,t,n){e.dispatchEvent(C(`${t?"intro":"outro"}${n}`))}const oe=new Set;let ie;function se(){ie={r:0,c:[],p:ie}}function re(){ie.r||u(ie.c),ie=ie.p}function ce(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function ae(e,t,n,o){if(e&&e.o){if(oe.has(e))return;oe.add(e),ie.c.push((()=>{oe.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const le={duration:0};function ue(e,t,n){let o,i,c=t(e,n),a=!1,l=0;function u(){o&&T(e,o)}function f(){const{delay:t=0,duration:n=300,easing:d=r,tick:f=s,css:p}=c||le;p&&(o=D(e,0,1,n,t,d,p,l++)),f(0,1);const h=v()+t,g=h+n;i&&i.abort(),a=!0,K((()=>ne(e,!0,"start"))),i=x((t=>{if(a){if(t>=g)return f(1,0),ne(e,!0,"end"),u(),a=!1;if(t>=h){const e=d((t-h)/n);f(e,1-e)}}return a}))}let p=!1;return{start(){p||(p=!0,T(e),d(c)?(c=c(),te().then(f)):f())},invalidate(){p=!1},end(){a&&(u(),a=!1)}}}function de(e,t,n,o){let i=t(e,n),c=o?0:1,a=null,l=null,f=null;function p(){f&&T(e,f)}function h(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(t){const{delay:n=0,duration:o=300,easing:d=r,tick:g=s,css:m}=i||le,$={start:v()+n,b:t};t||($.group=ie,ie.r+=1),a||l?l=$:(m&&(p(),f=D(e,c,t,o,n,d,m)),t&&g(0,1),a=h($,o),K((()=>ne(e,t,"start"))),x((t=>{if(l&&t>l.start&&(a=h(l,o),l=null,ne(e,a.b,"start"),m&&(p(),f=D(e,c,a.b,a.duration,0,d,i.css))),a)if(t>=a.end)g(c=a.b,1-c),ne(e,a.b,"end"),l||(a.b?p():--a.group.r||u(a.group.c)),a=null;else if(t>=a.start){const e=t-a.start;c=a.a+a.d*d(e/a.duration),g(c,1-c)}return!(!a&&!l)})))}return{run(e){d(i)?te().then((()=>{i=i(),g(e)})):g(e)},end(){p(),a=l=null}}}function fe(e){e&&e.c()}function pe(e,t,n,o){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),o||K((()=>{const t=e.$$.on_mount.map(a).filter(d);e.$$.on_destroy?e.$$.on_destroy.push(...t):u(t),e.$$.on_mount=[]})),s.forEach(K)}function he(e,t){const n=e.$$;null!==n.fragment&&(u(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ge(e,t){-1===e.$$.dirty[0]&&(F.push(e),Z||(Z=!0,G.then(X)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function me(e,t,n,o,i,r,c,a=[-1]){const d=N;I(e);const f=e.$$={fragment:null,ctx:[],props:r,update:s,not_equal:i,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:l(),dirty:a,skip_bound:!1,root:t.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=n?n(e,t.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&i(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),p&&ge(e,t)),n})):[],f.update(),p=!0,u(f.before_update),f.fragment=!!o&&o(f.ctx),t.target){if(t.hydrate){const e=function(e){return Array.from(e.childNodes)}(t.target);f.fragment&&f.fragment.l(e),e.forEach(R)}else f.fragment&&f.fragment.c();t.intro&&ce(e.$$.fragment),pe(e,t.target,t.anchor,t.customElement),X()}I(d)}class $e{$destroy(){he(this,1),this.$destroy=s}$on(e,t){if(!d(t))return s;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function we(e,t){document.dispatchEvent(C(e,Object.assign({version:"3.53.1"},t),{bubbles:!0}))}function ve(e,t){we("SvelteDOMInsert",{target:e,node:t}),S(e,t)}function be(e,t,n){we("SvelteDOMInsert",{target:e,node:t,anchor:n}),function(e,t,n){e.insertBefore(t,n||null)}(e,t,n)}function ye(e){we("SvelteDOMRemove",{node:e}),R(e)}function ke(e,t,n,o,i,s){const r=!0===o?["capture"]:o?Array.from(Object.keys(o)):[];i&&r.push("preventDefault"),s&&r.push("stopPropagation"),we("SvelteDOMAddEventListener",{node:e,event:t,handler:n,modifiers:r});const c=function(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}(e,t,n,o);return()=>{we("SvelteDOMRemoveEventListener",{node:e,event:t,handler:n,modifiers:r}),c()}}function xe(e,t,n){!function(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}(e,t,n),null==n?we("SvelteDOMRemoveAttribute",{node:e,attribute:t}):we("SvelteDOMSetAttribute",{node:e,attribute:t,value:n})}function Se(e,t){t=""+t,e.wholeText!==t&&(we("SvelteDOMSetData",{node:e,data:t}),e.data=t)}function ze(e){if(!("string"==typeof e||e&&"object"==typeof e&&"length"in e)){let t="{#each} only iterates over array-like objects.";throw"function"==typeof Symbol&&e&&Symbol.iterator in e&&(t+=" You can use a spread to convert this iterable into an array."),new Error(t)}}function Ee(e,t,n){for(const o of Object.keys(t))~n.indexOf(o)||console.warn(`<${e}> received an unexpected slot "${o}".`)}class Re extends $e{constructor(e){if(!e||!e.target&&!e.$$inline)throw new Error("'target' is a required option");super()}$destroy(){super.$destroy(),this.$destroy=()=>{console.warn("Component was already destroyed")}}$capture_state(){}$inject_state(){}}const _e=[];function Le(e,t=s){let n;const o=new Set;function i(t){if(f(e,t)&&(e=t,n)){const t=!_e.length;for(const t of o)t[1](),_e.push(t,e);if(t){for(let e=0;e<_e.length;e+=2)_e[e][0](_e[e+1]);_e.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,c=s){const a=[r,c];return o.add(a),1===o.size&&(n=t(i)||s),r(e),()=>{o.delete(a),0===o.size&&(n(),n=null)}}}}function Oe(e,t,n){const o=!Array.isArray(e),i=o?[e]:e,r=t.length<2;return c=e=>{let n=!1;const c=[];let a=0,l=s;const f=()=>{if(a)return;l();const n=t(o?c[0]:c,e);r?e(n):l=d(n)?n:s},p=i.map(((e,t)=>m(e,(e=>{c[t]=e,a&=~(1<<t),n&&f()}),(()=>{a|=1<<t}))));return n=!0,f(),function(){u(p),l()}},{subscribe:Le(n,c).subscribe};var c}class Pe{fileSize;sizeOnPage;potentialSavings;expectedSize;oversizedRatio;url;loading=Le(!0);image;node;currentSrc="";constructor(e){this.image=e,this.node=e.node;this.url=Le(e.getURL()),this.fileSize=Le({width:0,height:0,weight:0}),this.sizeOnPage=Le({width:0,height:0}),this.potentialSavings=this.derivePotentialSavings(),this.oversizedRatio=this.deriveOversizedRatio(),this.expectedSize=this.deriveExpectedSize()}deriveOversizedRatio(){return Oe([this.fileSize,this.sizeOnPage],(([e,t])=>this.image.getOversizedRatio(e,t)))}deriveExpectedSize(){return Oe(this.sizeOnPage,(e=>this.image.getExpectedSize(e)))}derivePotentialSavings(){return Oe([this.fileSize,this.sizeOnPage],(([e,t])=>this.image.getPotentialSavings(e,t)))}async updateDimensions(){const e=this.image.getSizeOnPage();this.sizeOnPage.set(e),await this.maybeUpdateWeight()}async maybeUpdateWeight(){if(this.image.getURL()===this.currentSrc)return;this.loading.set(!0),this.currentSrc=this.image.getURL();const e=await this.image.getFileSize(this.currentSrc);this.url.set(this.currentSrc),this.fileSize.set(e),this.loading.set(!1)}}const Be="jetpack-boost-guide",je={active:"Active",always_on:"Always On",paused:"Paused"};let Ce=localStorage.getItem(Be);Ce&&je[Ce]||(localStorage.setItem(Be,"Active"),Ce="active");const{set:Me,update:Ne,subscribe:Ae}=Le(Ce);Ae((e=>{localStorage.setItem(Be,e)}));const De={subscribe:Ae,set:Me,update:Ne,cycle:()=>{Ne((e=>{const t=Object.keys(je),n=t.indexOf(e);return t[(n+1)%t.length]}))}},Te=Oe(De,(e=>je[e]));function Ie(e){const t=1.70158;return--e*e*((t+1)*e+t)+1}function Ue(e){const t=e-1;return t*t*t+1}function qe(e,{delay:t=0,duration:n=400,easing:o=r}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:o,css:e=>"opacity: "+e*i}}function Fe(e,{delay:t=0,duration:n=400,easing:o=Ue,x:i=0,y:s=0,opacity:r=0}={}){const c=getComputedStyle(e),a=+c.opacity,l="none"===c.transform?"":c.transform,u=a*(1-r);return{delay:t,duration:n,easing:o,css:(e,t)=>`\n\t\t\ttransform: ${l} translate(${(1-e)*i}px, ${(1-e)*s}px);\n\t\t\topacity: ${a-u*t}`}}const He="app/features/image-guide/src/ui/JetpackLogo.svelte";function Je(e){let t,n,o,i,r;const a={c:function(){t=_("div"),n=L("svg"),o=L("path"),i=L("path"),r=L("path"),xe(o,"d","M55.4 107.8C84.3397 107.8 107.8 84.3397 107.8 55.4C107.8 26.4603 84.3397 3 55.4 3C26.4603 3 3 26.4603 3 55.4C3 84.3397 26.4603 107.8 55.4 107.8Z"),xe(o,"fill",e[1]),c(o,He,6,2,205),xe(i,"d","M58 46.6V97.4L84.2 46.6H58Z"),xe(i,"fill","white"),c(i,He,10,2,383),xe(r,"d","M52.7 64.1V13.4L26.6 64.1H52.7Z"),xe(r,"fill","white"),c(r,He,11,2,439),xe(n,"viewBox","0 0 110 110"),xe(n,"fill","none"),xe(n,"xmlns","http://www.w3.org/2000/svg"),c(n,He,5,1,128),B(t,"width",e[0]+"px"),B(t,"height",e[0]+"px"),xe(t,"class","svelte-8mh1rw"),c(t,He,4,0,78)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,s){be(e,t,s),ve(t,n),ve(n,o),ve(n,i),ve(n,r)},p:function(e,[n]){2&n&&xe(o,"fill",e[1]),1&n&&B(t,"width",e[0]+"px"),1&n&&B(t,"height",e[0]+"px")},i:s,o:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:a,id:Je.name,type:"component",source:"",ctx:e}),a}function We(e,t,n){let{$$slots:o={},$$scope:i}=t;Ee("JetpackLogo",o,[]);let{size:s=16}=t,{bg:r="#069E08"}=t;const c=["size","bg"];return Object.keys(t).forEach((e=>{~c.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<JetpackLogo> was created with unknown prop '${e}'`)})),e.$$set=e=>{"size"in e&&n(0,s=e.size),"bg"in e&&n(1,r=e.bg)},e.$capture_state=()=>({size:s,bg:r}),e.$inject_state=e=>{"size"in e&&n(0,s=e.size),"bg"in e&&n(1,r=e.bg)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[s,r]}class Ge extends Re{constructor(e){super(e),me(this,e,We,Je,f,{size:0,bg:1}),we("SvelteRegisterComponent",{component:this,tagName:"JetpackLogo",options:e,id:Je.name})}get size(){throw new Error("<JetpackLogo>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<JetpackLogo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get bg(){throw new Error("<JetpackLogo>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set bg(e){throw new Error("<JetpackLogo>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Ze(e){let t,n,o,i;n=new Ge({props:{size:12,bg:"transparent"},$$inline:!0});const a={c:function(){t=_("div"),fe(n.$$.fragment),xe(t,"class","spinner svelte-2eb8gc"),c(t,"app/features/image-guide/src/ui/Spinner.svelte",4,0,119)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,o){be(e,t,o),pe(n,t,null),i=!0},p:s,i:function(e){i||(ce(n.$$.fragment,e),o&&o.end(1),i=!0)},o:function(e){ae(n.$$.fragment,e),o=function(e,t,n){let o,i=t(e,n),c=!0;const a=ie;function l(){const{delay:t=0,duration:n=300,easing:l=r,tick:d=s,css:f}=i||le;f&&(o=D(e,1,0,n,t,l,f));const p=v()+t,h=p+n;K((()=>ne(e,!1,"start"))),x((t=>{if(c){if(t>=h)return d(0,1),ne(e,!1,"end"),--a.r||u(a.c),!1;if(t>=p){const e=l((t-p)/n);d(1-e,e)}}return c}))}return a.r+=1,d(i)?te().then((()=>{i=i(),l()})):l(),{end(t){t&&i.tick&&i.tick(1,0),c&&(o&&T(e,o),c=!1)}}}(t,qe,{duration:300}),i=!1},d:function(e){e&&ye(t),he(n),e&&o&&o.end()}};return we("SvelteRegisterBlock",{block:a,id:Ze.name,type:"component",source:"",ctx:e}),a}function Ke(e,t,n){let{$$slots:o={},$$scope:i}=t;Ee("Spinner",o,[]);const s=[];return Object.keys(t).forEach((e=>{~s.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Spinner> was created with unknown prop '${e}'`)})),e.$capture_state=()=>({fade:qe,JetpackLogo:Ge}),[]}class Ve extends Re{constructor(e){super(e),me(this,e,Ke,Ze,f,{}),we("SvelteRegisterComponent",{component:this,tagName:"Spinner",options:e,id:Ze.name})}}const Ye="app/features/image-guide/src/ui/Bubble.svelte";function Qe(e){let t,n,o;n=new Ve({$$inline:!0});const i={c:function(){t=_("div"),fe(n.$$.fragment),xe(t,"class","bubble-inner svelte-1nxseqo"),c(t,Ye,32,3,973)},m:function(e,i){be(e,t,i),pe(n,t,null),o=!0},p:s,i:function(e){o||(ce(n.$$.fragment,e),o=!0)},o:function(e){ae(n.$$.fragment,e),o=!1},d:function(e){e&&ye(t),he(n)}};return we("SvelteRegisterBlock",{block:i,id:Qe.name,type:"else",source:"(32:2) {:else}",ctx:e}),i}function Xe(e){let t,n,o;function i(e,t){return e[0]>9?nt:e[0]>1?tt:et}let r=i(e),a=r(e);const l={c:function(){t=_("div"),n=_("div"),a.c(),xe(n,"class","label"),c(n,Ye,21,4,657),xe(t,"class","bubble-inner svelte-1nxseqo"),c(t,Ye,20,3,626)},m:function(e,o){be(e,t,o),ve(t,n),a.m(n,null)},p:function(e,t){r===(r=i(e))&&a?a.p(e,t):(a.d(1),a=r(e),a&&(a.c(),a.m(n,null)))},i:function(e){o||K((()=>{o=ue(n,qe,{delay:200,duration:300}),o.start()}))},o:s,d:function(e){e&&ye(t),a.d()}};return we("SvelteRegisterBlock",{block:l,id:Xe.name,type:"if",source:"(20:2) {#if false === $isLoading}",ctx:e}),l}function et(e){let t,n;const o={c:function(){t=_("span"),t.textContent="<",n=O(" 1x"),B(t,"font-size","0.75em"),c(t,Ye,27,6,880)},m:function(e,o){be(e,t,o),be(e,n,o)},p:s,d:function(e){e&&ye(t),e&&ye(n)}};return we("SvelteRegisterBlock",{block:o,id:et.name,type:"else",source:"(27:5) {:else}",ctx:e}),o}function tt(e){let t,n,o=e[0].toFixed(1)+"";const i={c:function(){t=O(o),n=O("x")},m:function(e,o){be(e,t,o),be(e,n,o)},p:function(e,n){1&n&&o!==(o=e[0].toFixed(1)+"")&&Se(t,o)},d:function(e){e&&ye(t),e&&ye(n)}};return we("SvelteRegisterBlock",{block:i,id:tt.name,type:"if",source:"(25:35) ",ctx:e}),i}function nt(e){let t,n,o=Math.floor(e[0])+"";const i={c:function(){t=O(o),n=O("x")},m:function(e,o){be(e,t,o),be(e,n,o)},p:function(e,n){1&n&&o!==(o=Math.floor(e[0])+"")&&Se(t,o)},d:function(e){e&&ye(t),e&&ye(n)}};return we("SvelteRegisterBlock",{block:i,id:nt.name,type:"if",source:"(23:5) {#if $oversizedRatio > 9}",ctx:e}),i}function ot(e){let t,n,o,i,s,r,a,l,u;const d=[Xe,Qe],f=[];function p(e,t){return!1===e[2]?0:1}o=p(e),i=f[o]=d[o](e);const h={c:function(){t=_("div"),n=_("div"),i.c(),xe(n,"class","bubble svelte-1nxseqo"),c(n,Ye,18,1,573),xe(t,"class",s="interaction-area "+e[1]+" svelte-1nxseqo"),c(t,Ye,17,0,483)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(i,s){be(i,t,s),ve(t,n),f[o].m(n,null),a=!0,l||(u=ke(t,"mouseenter",e[8],!1,!1,!1),l=!0)},p:function(r,[c]){let l=o;o=p(e=r),o===l?f[o].p(e,c):(se(),ae(f[l],1,1,(()=>{f[l]=null})),re(),i=f[o],i?i.p(e,c):(i=f[o]=d[o](e),i.c()),ce(i,1),i.m(n,null)),(!a||2&c&&s!==(s="interaction-area "+e[1]+" svelte-1nxseqo"))&&xe(t,"class",s)},i:function(n){a||(ce(i),K((()=>{r||(r=de(t,Fe,e[5],!0)),r.run(1)})),a=!0)},o:function(n){ae(i),r||(r=de(t,Fe,e[5],!1)),r.run(0),a=!1},d:function(e){e&&ye(t),f[o].d(),e&&r&&r.end(),l=!1,u()}};return we("SvelteRegisterBlock",{block:h,id:ot.name,type:"component",source:"",ctx:e}),h}function it(e,t,n){let o,i,{$$slots:s={},$$scope:r}=t;Ee("Bubble",s,[]);let c,{index:a}=t,{store:l}=t;const u=l.oversizedRatio;g(u,"oversizedRatio"),$(e,u,(e=>n(0,o=e)));const d=l.loading;g(d,"isLoading"),$(e,d,(e=>n(2,i=e)));const f={delay:150+50*a,duration:250,y:2,easing:Ie};e.$$.on_mount.push((function(){void 0!==a||"index"in t||e.$$.bound[e.$$.props.index]||console.warn("<Bubble> was created without expected prop 'index'"),void 0!==l||"store"in t||e.$$.bound[e.$$.props.store]||console.warn("<Bubble> was created without expected prop 'store'")}));const p=["index","store"];return Object.keys(t).forEach((e=>{~p.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Bubble> was created with unknown prop '${e}'`)})),e.$$set=e=>{"index"in e&&n(6,a=e.index),"store"in e&&n(7,l=e.store)},e.$capture_state=()=>({backOut:Ie,fade:qe,fly:Fe,Spinner:Ve,index:a,store:l,severity:c,oversizedRatio:u,isLoading:d,scaleTransition:f,$oversizedRatio:o,$isLoading:i}),e.$inject_state=e=>{"index"in e&&n(6,a=e.index),"store"in e&&n(7,l=e.store),"severity"in e&&n(1,c=e.severity)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{1&e.$$.dirty&&n(1,c=o>4?"high":o>2.5?"medium":"normal")},[o,c,i,u,d,f,a,l,function(t){q.call(this,e,t)}]}class st extends Re{constructor(e){super(e),me(this,e,it,ot,f,{index:6,store:7}),we("SvelteRegisterComponent",{component:this,tagName:"Bubble",options:e,id:ot.name})}get index(){throw new Error("<Bubble>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set index(e){throw new Error("<Bubble>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get store(){throw new Error("<Bubble>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set store(e){throw new Error("<Bubble>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const rt="app/features/image-guide/src/ui/Popup.svelte";function ct(e){let t,n,o,i,s=e[22]+"";const r={c:function(){t=_("div"),n=O("The image loaded is stretched by "),o=O(s),i=O("x to fit the available space."),xe(t,"class","explanation svelte-1sg1cck"),c(t,rt,57,4,2030)},m:function(e,s){be(e,t,s),ve(t,n),ve(t,o),ve(t,i)},p:function(e,t){2&t&&s!==(s=e[22]+"")&&Se(o,s)},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:r,id:ct.name,type:"else",source:"(56:3) {:else}",ctx:e}),r}function at(e){let t,n,o,i,s,r;const a={c:function(){t=_("div"),n=O("Images may not always be perfectly sized on all screen sizes, so this is probably ok The\n\t\t\t\t\timage loaded is "),o=_("strong"),i=O(e[4]),s=O("x"),r=O(" larger than it appears in the browser."),c(o,rt,53,21,1873),xe(t,"class","explanation svelte-1sg1cck"),c(t,rt,51,4,1732)},m:function(e,c){be(e,t,c),ve(t,n),ve(t,o),ve(o,i),ve(o,s),ve(t,r)},p:function(e,t){16&t&&Se(i,e[4])},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:a,id:at.name,type:"if",source:"(51:38) ",ctx:e}),a}function lt(e){let t;const n={c:function(){t=_("div"),t.textContent="The image loaded is the same size as it appears in the browser.",xe(t,"class","explanation svelte-1sg1cck"),c(t,rt,47,4,1583)},m:function(e,n){be(e,t,n)},p:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:lt.name,type:"if",source:"(47:25) ",ctx:e}),n}function ut(e){let t,n,o,i,s,r;const a={c:function(){t=_("div"),n=O("The image loaded is "),o=_("strong"),i=O(e[4]),s=O("x"),r=O(" larger than it appears in the browser."),c(o,rt,44,25,1477),xe(t,"class","explanation svelte-1sg1cck"),c(t,rt,43,4,1426)},m:function(e,c){be(e,t,c),ve(t,n),ve(t,o),ve(o,i),ve(o,s),ve(t,r)},p:function(e,t){16&t&&Se(i,e[4])},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:a,id:ut.name,type:"if",source:"(43:3) {#if ratio >= 1.3}",ctx:e}),a}function dt(e){let t,n;const o={c:function(){t=_("img"),h(t.src,n=e[3])||xe(t,"src",n),xe(t,"alt",e[8]),B(t,"width",e[0]+"px"),B(t,"height",e[5]+"px"),xe(t,"width",e[0]),xe(t,"height",e[5]),xe(t,"class","svelte-1sg1cck"),c(t,rt,64,3,2247)},m:function(e,n){be(e,t,n)},p:function(e,o){8&o&&!h(t.src,n=e[3])&&xe(t,"src",n),256&o&&xe(t,"alt",e[8]),1&o&&B(t,"width",e[0]+"px"),32&o&&B(t,"height",e[5]+"px"),1&o&&xe(t,"width",e[0]),32&o&&xe(t,"height",e[5])},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:o,id:dt.name,type:"if",source:"(64:2) {#if $imageURL}",ctx:e}),o}function ft(e){let t;function n(e,t){return e[16]?gt:ht}let o=n(e),i=o(e);const s={c:function(){t=_("div"),i.c(),xe(t,"class","value"),c(t,rt,80,4,2657)},m:function(e,n){be(e,t,n),i.m(t,null)},p:function(e,s){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t,null)))},d:function(e){e&&ye(t),i.d()}};return we("SvelteRegisterBlock",{block:s,id:ft.name,type:"else",source:"(80:3) {:else}",ctx:e}),s}function pt(e){let t,n,o,i,s=e[2].width+"",r=e[2].height+"";const a={c:function(){t=_("div"),n=O(s),o=O(" x "),i=O(r),xe(t,"class","value"),c(t,rt,78,4,2578)},m:function(e,s){be(e,t,s),ve(t,n),ve(t,o),ve(t,i)},p:function(e,t){4&t&&s!==(s=e[2].width+"")&&Se(n,s),4&t&&r!==(r=e[2].height+"")&&Se(i,r)},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:a,id:pt.name,type:"if",source:"(78:3) {#if $fileSize.width > 0 && $fileSize.height > 0}",ctx:e}),a}function ht(e){let t;const n={c:function(){t=_("em"),t.textContent="Unknown",c(t,rt,84,6,2735)},m:function(e,n){be(e,t,n)},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:ht.name,type:"else",source:"(84:5) {:else}",ctx:e}),n}function gt(e){let t;const n={c:function(){t=O("Loading...")},m:function(e,n){be(e,t,n)},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:gt.name,type:"if",source:"(82:5) {#if $isLoading}",ctx:e}),n}function mt(e){let t;const n={c:function(){t=_("em"),t.textContent="Unknown",c(t,rt,108,5,3303)},m:function(e,n){be(e,t,n)},p:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:mt.name,type:"else",source:"(108:4) {:else}",ctx:e}),n}function $t(e){let t;const n={c:function(){t=O("Loading...")},m:function(e,n){be(e,t,n)},p:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:$t.name,type:"if",source:"(106:25) ",ctx:e}),n}function wt(e){let t,n,o=Math.round(e[2].weight)+"";const i={c:function(){t=O(o),n=O(" KB")},m:function(e,o){be(e,t,o),be(e,n,o)},p:function(e,n){4&n&&o!==(o=Math.round(e[2].weight)+"")&&Se(t,o)},d:function(e){e&&ye(t),e&&ye(n)}};return we("SvelteRegisterBlock",{block:i,id:wt.name,type:"if",source:"(104:4) {#if $fileSize.weight > 0}",ctx:e}),i}function vt(e){let t;const n={c:function(){t=_("em"),t.textContent="--",c(t,rt,121,5,3575)},m:function(e,n){be(e,t,n)},p:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:vt.name,type:"else",source:"(121:4) {:else}",ctx:e}),n}function bt(e){let t;const n={c:function(){t=O("Loading...")},m:function(e,n){be(e,t,n)},p:s,d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:bt.name,type:"if",source:"(119:25) ",ctx:e}),n}function yt(e){let t,n,o;const i={c:function(){t=_("strong"),n=O(e[19]),o=O(" KB"),c(t,rt,117,5,3476)},m:function(e,i){be(e,t,i),ve(t,n),ve(t,o)},p:function(e,t){524288&t&&Se(n,e[19])},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:i,id:yt.name,type:"if",source:"(117:4) {#if $potentialSavings > 0}",ctx:e}),i}function kt(e){let t;const n={c:function(){t=_("div"),t.textContent="Unable to estimate file size savings because the image is hosted on a different domain.",xe(t,"class","info svelte-1sg1cck"),c(t,rt,126,3,3650)},m:function(e,n){be(e,t,n)},d:function(e){e&&ye(t)}};return we("SvelteRegisterBlock",{block:n,id:kt.name,type:"if",source:"(126:2) {#if imageOrigin !== origin}",ctx:e}),n}function xt(e){let t,n,o,i,s,r,a,l,u,d,f,p,h,g,m,$,w,v,b,y,k,x,S,z,E,R,L,B,j,C,M,N,A,D,T,I,U,q,F,H,J,W,G,Z,V,Y=e[17].width+"",Q=e[17].height+"",X=e[18].width+"",ee=e[18].height+"";function te(e,t){return e[4]>=1.3?ut:1===e[4]?lt:e[4]>1&&e[4]<1.3?at:ct}function ne(e,t){return t===ct?function(e){const t=e.slice(),n=St(1/t[1]);return t[22]=n,t}(e):e}o=new Ge({props:{size:250},$$inline:!0});let oe=te(e),ie=oe(ne(e,oe)),se=e[3]&&dt(e);function re(e,t){return e[2].width>0&&e[2].height>0?pt:ft}let le=re(e),de=le(e);function ge(e,t){return e[2].weight>0?wt:e[16]?$t:mt}let me=ge(e),$e=me(e);function ke(e,t){return e[19]>0?yt:e[16]?bt:vt}let ze=ke(e),Ee=ze(e),Re=e[6]!==e[7]&&kt(e);const _e={c:function(){t=_("div"),n=_("div"),fe(o.$$.fragment),i=P(),s=_("div"),r=_("div"),a=_("div"),l=_("a"),u=O(e[8]),d=P(),ie.c(),f=P(),se&&se.c(),p=P(),h=_("div"),g=_("div"),m=_("div"),m.textContent="Image File Dimensions",$=P(),de.c(),w=P(),v=_("div"),b=_("div"),b.textContent="Expected Dimensions",y=P(),k=_("div"),x=O(Y),S=O(" x "),z=O(Q),E=P(),R=_("div"),L=_("div"),L.textContent="Size on screen",B=P(),j=_("div"),C=O(X),M=O(" x "),N=O(ee),A=P(),D=_("div"),T=_("div"),T.textContent="Image Size",I=P(),U=_("div"),$e.c(),q=P(),F=_("div"),H=_("div"),H.textContent="Potential savings",J=P(),W=_("div"),Ee.c(),G=P(),Re&&Re.c(),xe(n,"class","logo svelte-1sg1cck"),c(n,rt,33,1,1192),xe(l,"href",e[3]),xe(l,"target","_blank noreferrer"),xe(l,"class","svelte-1sg1cck"),c(l,rt,40,4,1327),xe(a,"class","title svelte-1sg1cck"),c(a,rt,39,3,1303),xe(r,"class","description svelte-1sg1cck"),c(r,rt,38,2,1274),xe(s,"class","preview svelte-1sg1cck"),c(s,rt,37,1,1250),xe(m,"class","label"),c(m,rt,76,3,2474),xe(g,"class","row svelte-1sg1cck"),c(g,rt,75,2,2453),xe(b,"class","label"),c(b,rt,91,3,2816),xe(k,"class","value"),c(k,rt,92,3,2864),xe(v,"class","row svelte-1sg1cck"),c(v,rt,90,2,2795),xe(L,"class","label"),c(L,rt,96,3,2969),xe(j,"class","value"),c(j,rt,97,3,3012),xe(R,"class","row svelte-1sg1cck"),c(R,rt,95,2,2948),xe(T,"class","label"),c(T,rt,101,3,3113),xe(U,"class","value"),c(U,rt,102,3,3152),xe(D,"class","row svelte-1sg1cck"),c(D,rt,100,2,3092),xe(H,"class","label"),c(H,rt,114,3,3373),xe(W,"class","value"),c(W,rt,115,3,3419),xe(F,"class","row svelte-1sg1cck"),c(F,rt,113,2,3352),xe(h,"class","meta"),c(h,rt,74,1,2432),xe(t,"class","details svelte-1sg1cck"),c(t,rt,32,0,1119)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,c){be(e,t,c),ve(t,n),pe(o,n,null),ve(t,i),ve(t,s),ve(s,r),ve(r,a),ve(a,l),ve(l,u),ve(r,d),ie.m(r,null),ve(s,f),se&&se.m(s,null),ve(t,p),ve(t,h),ve(h,g),ve(g,m),ve(g,$),de.m(g,null),ve(h,w),ve(h,v),ve(v,b),ve(v,y),ve(v,k),ve(k,x),ve(k,S),ve(k,z),ve(h,E),ve(h,R),ve(R,L),ve(R,B),ve(R,j),ve(j,C),ve(j,M),ve(j,N),ve(h,A),ve(h,D),ve(D,T),ve(D,I),ve(D,U),$e.m(U,null),ve(h,q),ve(h,F),ve(F,H),ve(F,J),ve(F,W),Ee.m(W,null),ve(h,G),Re&&Re.m(h,null),V=!0},p:function(t,[n]){e=t,(!V||256&n)&&Se(u,e[8]),(!V||8&n)&&xe(l,"href",e[3]),oe===(oe=te(e))&&ie?ie.p(ne(e,oe),n):(ie.d(1),ie=oe(ne(e,oe)),ie&&(ie.c(),ie.m(r,null))),e[3]?se?se.p(e,n):(se=dt(e),se.c(),se.m(s,null)):se&&(se.d(1),se=null),le===(le=re(e))&&de?de.p(e,n):(de.d(1),de=le(e),de&&(de.c(),de.m(g,null))),(!V||131072&n)&&Y!==(Y=e[17].width+"")&&Se(x,Y),(!V||131072&n)&&Q!==(Q=e[17].height+"")&&Se(z,Q),(!V||262144&n)&&X!==(X=e[18].width+"")&&Se(C,X),(!V||262144&n)&&ee!==(ee=e[18].height+"")&&Se(N,ee),me===(me=ge(e))&&$e?$e.p(e,n):($e.d(1),$e=me(e),$e&&($e.c(),$e.m(U,null))),ze===(ze=ke(e))&&Ee?Ee.p(e,n):(Ee.d(1),Ee=ze(e),Ee&&(Ee.c(),Ee.m(W,null))),e[6]!==e[7]?Re||(Re=kt(e),Re.c(),Re.m(h,null)):Re&&(Re.d(1),Re=null)},i:function(e){V||(ce(o.$$.fragment,e),Z||K((()=>{Z=ue(t,Fe,{duration:150,y:4,easing:Ie}),Z.start()})),V=!0)},o:function(e){ae(o.$$.fragment,e),V=!1},d:function(e){e&&ye(t),he(o),ie.d(),se&&se.d(),de.d(),$e.d(),Ee.d(),Re&&Re.d()}};return we("SvelteRegisterBlock",{block:_e,id:xt.name,type:"component",source:"",ctx:e}),_e}function St(e){return e%1==0?e:parseFloat(e.toFixed(2))}function zt(e,t,n){let o,i,r,c,a,l,u,d,f,p,h,g,$,w,v,b,y,k,x,S,z=s,E=()=>(z(),z=m(i,(e=>n(1,w=e))),i),R=s,_=()=>(R(),R=m(r,(e=>n(2,v=e))),r),L=s,O=()=>(L(),L=m(u,(e=>n(3,b=e))),u),P=s,B=()=>(P(),P=m(o,(e=>n(16,y=e))),o),j=s,C=()=>(j(),j=m(l,(e=>n(17,k=e))),l),M=s,N=()=>(M(),M=m(c,(e=>n(18,x=e))),c),A=s,D=()=>(A(),A=m(a,(e=>n(19,S=e))),a);e.$$.on_destroy.push((()=>z())),e.$$.on_destroy.push((()=>R())),e.$$.on_destroy.push((()=>L())),e.$$.on_destroy.push((()=>P())),e.$$.on_destroy.push((()=>j())),e.$$.on_destroy.push((()=>M())),e.$$.on_destroy.push((()=>A()));let{$$slots:T={},$$scope:I}=t;Ee("Popup",T,[]);let{store:U}=t,{size:q}=t;e.$$.on_mount.push((function(){void 0!==U||"store"in t||e.$$.bound[e.$$.props.store]||console.warn("<Popup> was created without expected prop 'store'"),void 0!==q||"size"in t||e.$$.bound[e.$$.props.size]||console.warn("<Popup> was created without expected prop 'size'")}));const F=["store","size"];return Object.keys(t).forEach((e=>{~F.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Popup> was created with unknown prop '${e}'`)})),e.$$set=e=>{"store"in e&&n(20,U=e.store),"size"in e&&n(21,q=e.size)},e.$capture_state=()=>({backOut:Ie,fly:Fe,JetpackLogo:Ge,store:U,size:q,maybeDecimals:St,ratio:$,previewWidth:h,previewHeight:g,imageOrigin:p,origin:f,imageName:d,imageURL:u,expectedSize:l,potentialSavings:a,sizeOnPage:c,fileSize:r,oversizedRatio:i,isLoading:o,$oversizedRatio:w,$fileSize:v,$imageURL:b,$isLoading:y,$expectedSize:k,$sizeOnPage:x,$potentialSavings:S}),e.$inject_state=e=>{"store"in e&&n(20,U=e.store),"size"in e&&n(21,q=e.size),"ratio"in e&&n(4,$=e.ratio),"previewWidth"in e&&n(0,h=e.previewWidth),"previewHeight"in e&&n(5,g=e.previewHeight),"imageOrigin"in e&&n(6,p=e.imageOrigin),"origin"in e&&n(7,f=e.origin),"imageName"in e&&n(8,d=e.imageName),"imageURL"in e&&O(n(9,u=e.imageURL)),"expectedSize"in e&&C(n(10,l=e.expectedSize)),"potentialSavings"in e&&D(n(11,a=e.potentialSavings)),"sizeOnPage"in e&&N(n(12,c=e.sizeOnPage)),"fileSize"in e&&_(n(13,r=e.fileSize)),"oversizedRatio"in e&&E(n(14,i=e.oversizedRatio)),"isLoading"in e&&B(n(15,o=e.isLoading))},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{1048576&e.$$.dirty&&B(n(15,o=U.loading)),1048576&e.$$.dirty&&E(n(14,i=U.oversizedRatio)),1048576&e.$$.dirty&&_(n(13,r=U.fileSize)),1048576&e.$$.dirty&&N(n(12,c=U.sizeOnPage)),1048576&e.$$.dirty&&D(n(11,a=U.potentialSavings)),1048576&e.$$.dirty&&C(n(10,l=U.expectedSize)),1048576&e.$$.dirty&&O(n(9,u=U.url)),8&e.$$.dirty&&n(8,d=b.split("/").pop()),8&e.$$.dirty&&n(6,p=new URL(b).origin),2097152&e.$$.dirty&&n(0,h="normal"===q?100:50),5&e.$$.dirty&&n(5,g=Math.floor(h/(v.width/v.height))),2&e.$$.dirty&&n(4,$=St(w))},n(7,f=new URL(window.location.href).origin),[h,w,v,b,$,g,p,f,d,u,l,a,c,r,i,o,y,k,x,S,U,q]}class Et extends Re{constructor(e){super(e),me(this,e,zt,xt,f,{store:20,size:21}),we("SvelteRegisterComponent",{component:this,tagName:"Popup",options:e,id:xt.name})}get store(){throw new Error("<Popup>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set store(e){throw new Error("<Popup>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get size(){throw new Error("<Popup>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set size(e){throw new Error("<Popup>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Rt="app/features/image-guide/src/ui/Main.svelte";function _t(e,t,n){const o=e.slice();return o[9]=t[n],o[11]=n,o}function Lt(e){let t,n,o,i,s,r,a,l=e[0];ze(l);let u=[];for(let t=0;t<l.length;t+=1)u[t]=Ot(_t(e,l,t));const d=e=>ae(u[e],1,1,(()=>{u[e]=null}));let f=!1!==e[1]&&Pt(e);const p={c:function(){t=_("div"),n=_("div");for(let e=0;e<u.length;e+=1)u[e].c();o=P(),f&&f.c(),xe(n,"class","previews svelte-fq0g96"),c(n,Rt,44,2,1374),xe(t,"class",i="guide "+e[3]+" svelte-fq0g96"),j(t,"show",!1!==e[1]),c(t,Rt,43,1,1288)},m:function(i,c){be(i,t,c),ve(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);ve(t,o),f&&f.m(t,null),s=!0,r||(a=ke(t,"mouseleave",e[4],!1,!1,!1),r=!0)},p:function(e,o){if(3&o){let t;for(l=e[0],ze(l),t=0;t<l.length;t+=1){const i=_t(e,l,t);u[t]?(u[t].p(i,o),ce(u[t],1)):(u[t]=Ot(i),u[t].c(),ce(u[t],1),u[t].m(n,null))}for(se(),t=l.length;t<u.length;t+=1)d(t);re()}!1!==e[1]?f?(f.p(e,o),2&o&&ce(f,1)):(f=Pt(e),f.c(),ce(f,1),f.m(t,null)):f&&(se(),ae(f,1,1,(()=>{f=null})),re()),(!s||8&o&&i!==(i="guide "+e[3]+" svelte-fq0g96"))&&xe(t,"class",i),(!s||10&o)&&j(t,"show",!1!==e[1])},i:function(e){if(!s){for(let e=0;e<l.length;e+=1)ce(u[e]);ce(f),s=!0}},o:function(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)ae(u[e]);ae(f),s=!1},d:function(e){e&&ye(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(u,e),f&&f.d(),r=!1,a()}};return we("SvelteRegisterBlock",{block:p,id:Lt.name,type:"if",source:"(43:0) {#if $guideState === 'active' || $guideState === 'always_on'}",ctx:e}),p}function Ot(e){let t,n;t=new st({props:{index:e[11],store:e[9]},$$inline:!0}),t.$on("mouseenter",(function(){return e[7](e[11])}));const o={c:function(){fe(t.$$.fragment)},m:function(e,o){pe(t,e,o),n=!0},p:function(n,o){e=n;const i={};1&o&&(i.store=e[9]),t.$set(i)},i:function(e){n||(ce(t.$$.fragment,e),n=!0)},o:function(e){ae(t.$$.fragment,e),n=!1},d:function(e){he(t,e)}};return we("SvelteRegisterBlock",{block:o,id:Ot.name,type:"each",source:"(46:3) {#each stores as store, index}",ctx:e}),o}function Pt(e){let t,n;t=new Et({props:{store:e[0][e[1]],size:e[3]},$$inline:!0});const o={c:function(){fe(t.$$.fragment)},m:function(e,o){pe(t,e,o),n=!0},p:function(e,n){const o={};3&n&&(o.store=e[0][e[1]]),8&n&&(o.size=e[3]),t.$set(o)},i:function(e){n||(ce(t.$$.fragment,e),n=!0)},o:function(e){ae(t.$$.fragment,e),n=!1},d:function(e){he(t,e)}};return we("SvelteRegisterBlock",{block:o,id:Pt.name,type:"if",source:"(50:2) {#if show !== false}",ctx:e}),o}function Bt(e){let t,n,o=("active"===e[2]||"always_on"===e[2])&&Lt(e);const i={c:function(){o&&o.c(),t=O("")},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(e,i){o&&o.m(e,i),be(e,t,i),n=!0},p:function(e,[n]){"active"===e[2]||"always_on"===e[2]?o?(o.p(e,n),4&n&&ce(o,1)):(o=Lt(e),o.c(),ce(o,1),o.m(t.parentNode,t)):o&&(se(),ae(o,1,1,(()=>{o=null})),re())},i:function(e){n||(ce(o),n=!0)},o:function(e){ae(o),n=!1},d:function(e){o&&o.d(e),e&&ye(t)}};return we("SvelteRegisterBlock",{block:i,id:Bt.name,type:"component",source:"",ctx:e}),i}function jt(e=-1,t=-1){return e<200||t<200?"micro":e<400||t<400?"small":"normal"}function Ct(e,t,n){let o,i,s;g(De,"guideState"),$(e,De,(e=>n(2,i=e)));let{$$slots:r={},$$scope:c}=t;Ee("Main",r,[]);let a,{stores:l}=t;function u(){"always_on"!==i&&n(1,a=!1)}function d(e=!1){e?l.forEach((e=>e.node.classList.add("jetpack-boost-guide__backdrop"))):l.forEach((e=>e.node.classList.remove("jetpack-boost-guide__backdrop")))}U((()=>{l.forEach((e=>e.updateDimensions()))}));const f=l[0].sizeOnPage;g(f,"sizeOnPage"),$(e,f,(e=>n(6,s=e))),e.$$.on_mount.push((function(){void 0!==l||"stores"in t||e.$$.bound[e.$$.props.stores]||console.warn("<Main> was created without expected prop 'stores'")}));const p=["stores"];Object.keys(t).forEach((e=>{~p.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<Main> was created with unknown prop '${e}'`)}));return e.$$set=e=>{"stores"in e&&n(0,l=e.stores)},e.$capture_state=()=>({onMount:U,guideState:De,Bubble:st,Popup:Et,stores:l,show:a,onMouseLeave:u,getGuideSize:jt,toggleBackdrop:d,sizeOnPage:f,size:o,$guideState:i,$sizeOnPage:s}),e.$inject_state=e=>{"stores"in e&&n(0,l=e.stores),"show"in e&&n(1,a=e.show),"size"in e&&n(3,o=e.size)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),e.$$.update=()=>{64&e.$$.dirty&&n(3,o=jt(s.width,s.height)),4&e.$$.dirty&&n(1,a="always_on"===i&&0),2&e.$$.dirty&&d(!1!==a)},[l,a,i,o,u,f,s,e=>n(1,a=e)]}class Mt extends Re{constructor(e){super(e),me(this,e,Ct,Bt,f,{stores:0}),we("SvelteRegisterComponent",{component:this,tagName:"Main",options:e,id:Bt.name})}get stores(){throw new Error("<Main>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set stores(e){throw new Error("<Main>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function Nt(e){if(!e.parentNode)return null;if(!(e.parentNode instanceof HTMLElement))return null;if("BODY"===e.parentNode.tagName)return e.parentNode;if(e.parentNode.classList.contains("jetpack-boost-guide"))return e.parentNode;const t=getComputedStyle(e.parentNode).position;return"static"===t||"relative"===t?e.parentNode:Nt(e.parentNode)}let At=0;function Dt(e){const t=e.node;if(!(e.node instanceof HTMLImageElement)&&["static","relative"].includes(getComputedStyle(t).position))return t;if(!t.parentNode||!t.parentElement)return;const n=Nt(t);if(n?.classList.contains("jetpack-boost-guide"))return n;if(n){const e=getComputedStyle(n);if("relative"===e.position){const e=Array.from(n.children).find((e=>e.classList.contains("jetpack-boost-guide")));if(e&&e instanceof HTMLElement)return e}const t=document.createElement("div");return t.classList.add("jetpack-boost-guide"),t.dataset.jetpackBoostGuideId=(++At).toString(),"static"===e.position&&(t.classList.add("relative"),Array.from(n.children).reverse().forEach((e=>t.appendChild(e)))),n.prepend(t),t}return t.parentElement}const Tt="app/features/image-guide/src/ui/AdminBarToggle.svelte";function It(e){let t,n,o,i,s,r,a,l,u,d;n=new Ge({$$inline:!0});const f={c:function(){t=_("a"),fe(n.$$.fragment),o=P(),i=_("span"),s=O("Image Guide: "),r=O(e[2]),c(i,Tt,15,1,333),xe(t,"id","jetpack-boost-guide-bar"),xe(t,"href",e[0]),xe(t,"class",a="ab-item "+e[1]+" svelte-itog5b"),c(t,Tt,8,0,205)},l:function(e){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(c,a){var f;be(c,t,a),pe(n,t,null),ve(t,o),ve(t,i),ve(i,s),ve(i,r),l=!0,u||(d=ke(t,"click",(f=e[3],function(e){return e.preventDefault(),f.call(this,e)}),!1,!0,!1),u=!0)},p:function(e,[n]){(!l||4&n)&&Se(r,e[2]),(!l||1&n)&&xe(t,"href",e[0]),(!l||2&n&&a!==(a="ab-item "+e[1]+" svelte-itog5b"))&&xe(t,"class",a)},i:function(e){l||(ce(n.$$.fragment,e),l=!0)},o:function(e){ae(n.$$.fragment,e),l=!1},d:function(e){e&&ye(t),he(n),u=!1,d()}};return we("SvelteRegisterBlock",{block:f,id:It.name,type:"component",source:"",ctx:e}),f}function Ut(e,t,n){let o,i;g(De,"guideState"),$(e,De,(e=>n(1,o=e))),g(Te,"guideLabel"),$(e,Te,(e=>n(2,i=e)));let{$$slots:s={},$$scope:r}=t;Ee("AdminBarToggle",s,[]);let{href:c}=t;function a(){De.cycle()}e.$$.on_mount.push((function(){void 0!==c||"href"in t||e.$$.bound[e.$$.props.href]||console.warn("<AdminBarToggle> was created without expected prop 'href'")}));const l=["href"];return Object.keys(t).forEach((e=>{~l.indexOf(e)||"$$"===e.slice(0,2)||"slot"===e||console.warn(`<AdminBarToggle> was created with unknown prop '${e}'`)})),e.$$set=e=>{"href"in e&&n(0,c=e.href)},e.$capture_state=()=>({guideState:De,guideLabel:Te,JetpackLogo:Ge,href:c,toggleUI:a,$guideState:o,$guideLabel:i}),e.$inject_state=e=>{"href"in e&&n(0,c=e.href)},t&&"$$inject"in t&&e.$inject_state(t.$$inject),[c,o,i,a]}class qt extends Re{constructor(e){super(e),me(this,e,Ut,It,f,{href:0}),we("SvelteRegisterComponent",{component:this,tagName:"AdminBarToggle",options:e,id:It.name})}get href(){throw new Error("<AdminBarToggle>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set href(e){throw new Error("<AdminBarToggle>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("wp-admin-bar-jetpack-boost-image-guide"),t=e?.querySelector("a");if(e&&t){const n=t.getAttribute("href");t.remove(),new qt({target:e,props:{href:n}})}}));const Ft=[];function Ht(){De.subscribe((async e=>{if("paused"===e)return;const t=o(Array.from(document.querySelectorAll("body *:not(.jetpack-boost-guide > *):not(.jetpack-boost-guide)"))),n=t.filter((e=>{const{width:t,height:n}=e.getSizeOnPage();return!(!t||!n)&&t>=65&&n>=65}));Ft.push(...function(e){const t=e.reduce(((e,t)=>{if(!t.node.parentNode)return console.error("Image has no parent",t.node),e;const n=Dt(t);if(!n)return console.error("Could not find a parent for image",t),e;const o=parseInt(n.dataset.jetpackBoostGuideId||""),i=e[o]?.props.stores||[],s=new Pe(t);return i.push(s),1===i.length&&(e[o]={target:n,intro:!0,props:{stores:i}}),e}),{});return Object.values(t).map((e=>(new Mt(e),e.props.stores))).flat()}(n))}))}window.addEventListener("load",(()=>{Ht(),window.addEventListener("resize",function(){let e;return()=>{e&&clearTimeout(e),e=setTimeout((()=>{Ft.forEach((e=>{e.updateDimensions()}))}),500)}}())}))}();
//# sourceMappingURL=guide.js.map
